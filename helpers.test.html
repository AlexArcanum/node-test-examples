<!DOCTYPE html>

<html>
<head>
  <title>helpers.test.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          <h1>helpers.test.coffee</h1>
        

        
          <div class="toc">
            <h3>Table of Contents</h3>
            <ol>
              
                
                <li>
                  <a class="source" href="api.test.html">
                    api.test.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="browser.test.html">
                    browser.test.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="helpers.test.html">
                    helpers.test.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="testHelpers.html">
                    testHelpers.coffee
                  </a>
                </li>
              
                
                <li>
                  <a class="source" href="users.test.html">
                    users.test.coffee
                  </a>
                </li>
              
            </ol>
          </div>
        
      </div>

      
        
        <p>Codes you should look at: </p>
<ul>
<li><a href="https://github.com/conancat/node-test-examples/blob/master/src/test/helpers.test.coffee">helpers.test.coffee</a></li>
</ul>
<p>Related pages: </p>
<ul>
<li><a href="http://conancat.github.com/node-test-examples/helpers.html">Function code</a></li>
</ul>
<h2>Setting up</h2>
<p><em>IMPORTANT</em>: Set your environment as testing, and have environment specific 
configurations. You DON&#39;T want to mess with your production database while
you&#39;re working on testing! To see how we setup environment specific configurations, 
check out our <a href="http://conancat.github.com/node-test-examples/conf.html">configuration file</a>.</p>

        
          <div class='highlight'><pre>process.env.NODE_ENV = <span class="string">"testing"</span></pre></div>
        
      
        
        <p>Here we&#39;re declaring some variables that we&#39;re gonna use. </p>
<ul>
<li>Use Chai module for assertion. We&#39;ll be using the <a href="http://chaijs.com/guide/styles/"><code>expect</code></a> interface here. </li>
<li>Require the main module that we&#39;ll be using.</li>
</ul>

        
          <div class='highlight'><pre> 
{expect} = require <span class="string">"chai"</span>

helpers = require <span class="string">"../lib/helpers"</span></pre></div>
        
      
        
        <h2>Begin Test</h2>
<p>First we create a group of tests, let&#39;s start by describing the test</p>

        
          <div class='highlight'><pre>describe <span class="string">"Module testing example: Input validation"</span>, -&gt;</pre></div>
        
      
        
        <p>Just a quick reference to the function we&#39;re testing</p>

        
          <div class='highlight'><pre>  {validateAge} = helpers</pre></div>
        
      
        
        <p>These tests are straight forward true or false tests that we want
to run against our function. We want the result being returned 
from the function works exactly like how we want it to be.</p>

        
          <div class='highlight'><pre>  it <span class="string">"should return true if valid age is given"</span>, -&gt;
    val = validateAge(<span class="number">10</span>)
    expect(val).to.be.<span class="literal">true</span>

  it <span class="string">"should return false if given a pure string"</span>, -&gt;
    val = validateAge(<span class="string">"donkey"</span>)
    expect(val).to.be.<span class="literal">false</span>

  it <span class="string">"should return false if given a number + string combination"</span>, -&gt;
    val = validateAge(<span class="string">"10 years old"</span>)
    expect(val).to.be.<span class="literal">false</span></pre></div>
        
      
        
        <p>In some cases we want to see how well this function is performing. 
Yeah, unit tests, baby! Let&#39;s run the function 10000 times and see
how much times it takes for it to perform. This is good for benchmarking
and optimising your code. But most of the time, as a first step, get the functions 
right first. </p>

        
          <div class='highlight'><pre>  it <span class="string">"should run 10000 iterations successfully"</span>, -&gt;
    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.</span>.<span class="number">.10000</span>]
      val = validateAge(<span class="number">10</span>)
      expect(val).to.be.<span class="literal">true</span></pre></div>
        
      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
