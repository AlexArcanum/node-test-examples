<!DOCTYPE html>

<html>
<head>
  <title>NodeJS Tests Example</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="public/stylesheets/normalize.css" />
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div class="container">
    <div class="page">

      <div class="header">
        
          
          <h1>NodeJS Tests Example</h1>
<p>This project is an example project to demonstrate how to write tests in NodeJS. We will look at how to: </p>
<ul>
<li>Test regular NodeJS modules</li>
<li>Test interactions with the database</li>
<li>Test API requests </li>
<li>Headless browser testing on the server side (with <a href="http://phantomjs.org/">PhantomJS</a>)</li>
</ul>
<p>This project serves as an introduction to testing with NodeJS. If you&#39;re a beginner to NodeJS, new to writing tests, or just checking things out, have fun and let me know what you think! </p>
<p>Check out the project&#39;s <a href="http://node-test-examples.github.com">documentation page</a>! </p>
<p>If you have any questions, you can also find me on <a href="http://twitter.com/conancat">Twitter</a> or email me at conancat@gmail.com. </p>
<h2>Tools that we&#39;ll need</h2>
<ul>
<li><a href="http://visionmedia.github.com/mocha/">Mocha</a>, our testing framework of choice</li>
<li><a href="http://chaijs.com/">Chai</a> as our assertion library</li>
<li><a href="http://phantomjs.org/">PhantomJS</a> as our ghostly, headless browser testing tool</li>
</ul>
<p>And of course, I&#39;d assume that you already have some prior experience with awesome tools like <a href="http://expressjs.com/">Express</a>, <a href="https://github.com/mikeal/request">Request</a>, <a href="https://github.com/caolan/async">Async</a> and so forth. If you haven&#39;t, go check it out! </p>
<p>This project is written in <a href="http://coffeescript.org/">CoffeeScript</a>, but the concepts presented are absolutely the same with what you&#39;re going to do with JavaScript. As long as you understand what&#39;s happening, you can apply it anywhere! </p>
<h2>Setting up</h2>
<p>First thing first, setting up this repo is easy as ABC. </p>
<p>git clone <a href="https://github.com/conancat/node-test-examples.git">https://github.com/conancat/node-test-examples.git</a>
cd node-test-examples
npm install</p>
<p>Also, you&#39;ll need to have Mocha installed as an executable by doing:</p>
<p>npm install mocha -g</p>
<p>You&#39;ll also need to install PhantomJS in order for the browser tests to work. You can follow the instructions on (installing PhantomJS)[<a href="http://phantomjs.org/download.html">http://phantomjs.org/download.html</a>] here. </p>
<h2>Running the app</h2>
<p>At the root of the folder, type</p>
<p>node app.js</p>
<p>Then you can go to <code>http://localhost:3000</code> to see what the app does. Yeah, we&#39;re gonna test the hell outta this simple app that asks for your name, your age and your favorite food! </p>
<h2>Running the tests</h2>
<p>At the root folder of this project, type</p>
<p>mocha</p>
<p>Then the tests should run. Yay! If you want a more verbose version of the test results, you can type this instead: </p>
<p>mocha -R spec</p>
<h2>Documentation</h2>
<p>There are five different parts of this exercise. You can look at the documentation, and comparing the actual code as well as the test cases! </p>
<h3>Simple function testing</h3>
<p>This is a straightforward one. We&#39;ll just take a simple function and test the hell outta it. Hey, you always want to make sure the code you wrote works!</p>
<ul>
<li><a href="http://node-test-examples.github.com/helpers.html">Function code</a></li>
<li><a href="http://node-test-examples.github.com/helpers.test.html">Test code</a></li>
</ul>
<h3>Database testing</h3>
<p>We have two simple functions that interact with the database -- <code>get</code> and <code>createOrUpdate</code>. Let&#39;s setup and create mocks, run tests to make sure things are working properly, and nicely clean things up after we&#39;re done.</p>
<ul>
<li><a href="http://node-test-examples.github.com/users.html">Function code</a></li>
<li><a href="http://node-test-examples.github.com/users.test.html">Test code</a></li>
</ul>
<h3>API Testing</h3>
<p>So we have REST api and we want to make sure it works. Let&#39;s start a server, make calls to it and check if it returns the desired results!</p>
<ul>
<li><a href="http://node-test-examples.github.com/submit.html">Function code</a></li>
<li><a href="http://node-test-examples.github.com/api.test.html">Test code</a></li>
</ul>
<h3>Headless Browser Testing</h3>
<p>Sometimes it&#39;s too slow to need to open every single page on your website every single time you want to deploy a site, just to see if everything is working. Let&#39;s start a server, get a headless zombie ghost phantom tester thing to go through the site and see if things are working! </p>
<ul>
<li><a href="http://node-test-examples.github.com/browser.test.html">Test code</a></li>
</ul>
<p>Remember to start the server yourself at least once to go through and see what&#39;s happening on the site, before we try to emulate things with our little phantom!</p>
<h2>Test results</h2>
<p>For your reference only! </p>
<p>API test example: POST /submit
Perfect input
✓ should return a JSON object
✓ should contain the meta data
✓ should return status of 200
✓ should return &#39;ok&#39; message
Error input
✓ should return a JSON object
✓ should contain the meta data
✓ should return status of 403
✓ should return error message saying &#39;Age must be a number&#39;</p>
<p>Headless Browser test example: Open homepage
✓ should be able to open page successfully with correct page title
✓ should contain 3 input boxes
✓ should contain a submit button</p>
<p>Headless browser test example: Submitting a form
✓ should say Hello Caesar at the next page
✓ should show Caesar&#39;s name and age and favorite food</p>
<p>Module testing example: Input validation
✓ should return true if valid age is given
✓ should return false if given a pure string
✓ should return false if given a number + string combination
✓ should run 10000 iterations successfully (52ms)</p>
<p>Database test example: Getting data from db
✓ should get the user by supplying the name in input
✓ should return user that has age specified if specified
✓ should return null if no users are found</p>
<p>Database test example: Creating or updating data in db
✓ should create user successfully given a perfect input
✓ should throw error if missing name in input
✓ should throw error if missing age in input
✓ should throw error if age is not a number</p>
<p>24 tests complete (2 seconds)</p>

          
        

        
      </div>

      
      <div class="fleur">h</div>
    </div>
  </div>
</body>
</html>
